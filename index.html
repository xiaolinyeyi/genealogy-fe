<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>西同下赵氏家谱</title>
    </head>
        
    <body>
        <h1>
            <nav id="nav">
                <a href="#home">首页</a> |
                <a href="#genealogyTree">家族传承</a> 
                <a href="#familyTable">家庭成员</a>
            </nav>
        </h1>
        <div id="content"></div>
        <div id="chart-container"></div>
    </body>
</html>

<script src="./data-manager.js"></script>
<script src="./router.js"></script>
<script src="./download.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/orgchart/3.1.1/js/jquery.orgchart.min.js"></script>

<script>
    var datascource = {
    'id': '1',
    'name': 'Lao Lao',
    'title': 'general manager',
    'children': [{
        'id': '2',
        'name': 'Bo Miao',
        'title': 'department manager'
    },
    {
        'id': '3',
        'name': 'Su Miao',
        'title': 'department manager',
        'children': [{
            'id': '4',
            'name': 'Tie Hua',
            'title': 'senior engineer'
        },
        {
            'id': '5',
            'name': 'Hei Hei',
            'title': 'senior engineer',
            'children': [{
                'id': '6',
                'name': 'Pang Pang',
                'title': 'engineer'
            },
            {
                'id': '7',
                'name': 'Xiang Xiang',
                'title': 'UE engineer'
            }]
        }]
    },
    {
        'id': '8',
        'name': 'Yu Jie',
        'title': 'department manager'
    },
    {
        'id': '9',
        'name': 'Yu Li',
        'title': 'department manager'
    },
    {
        'id': '10',
        'name': 'Hong Miao',
        'title': 'department manager'
    },
    {
        'id': '11',
        'name': 'Yu Wei',
        'title': 'department manager'
    },
    {
        'id': '12',
        'name': 'Chun Miao',
        'title': 'department manager'
    },
    {
        'id': '13',
        'name': 'Yu Tie',
        'title': 'department manager'
    }]
};
$('#chart-container').orgchart({
    'data': datascource,
    'nodeContent': 'title',
    'nodeID': 'id',
    'createNode': function($node, data) {
        var secondMenuIcon = $('<i>', {
            'class': 'fa fa-info-circle second-menu-icon',
            click: function() {
                $(this).siblings('.second-menu').toggle();
            }
        });
        var secondMenu = '<div class="second-menu"><img class="avatar" src="../img/avatar/' + data.id + '.jpg"></div>';
        $node.append(secondMenuIcon).append(secondMenu);
    }
});
</script>
<script>
    window.onload = function() {
        fetchClanData(function() {
            document.getElementById("content").innerHTML = ""
            dispatch(null)
        })
    }
    window.onhashchange = function(event) {
        document.getElementById("content").innerHTML = ""
        dispatch(event)
    }
</script>

<style>
    body {
        background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fycimg.woofeng.cn%2F20180129%2F20180129103039_55493.jpg&refer=http%3A%2F%2Fycimg.woofeng.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1622213910&t=b2127cb76f0ea25691dc6d316468158f');
        /* font-family:LiSu, STLiti, "Microsoft YaHei", 微软雅黑, "MicrosoftJhengHei", 华文细黑, STHeiti,MingLiu  */
        font-family:LiSu
    }
    a:visited {
        color: blue;
    }
    a:link {
        color: blue;
        text-decoration:none;
    }
    nav {
        margin-left: 20px;
    }
    #content {
        margin-left: 20px;
    }
</style>